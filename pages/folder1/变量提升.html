<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>btqf-blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/egg.png">
    <meta name="description" content="btqf-blog">
    
    <link rel="preload" href="/assets/css/0.styles.6cf9dbb0.css" as="style"><link rel="preload" href="/assets/js/app.cffeba78.js" as="script"><link rel="preload" href="/assets/js/2.caeefc96.js" as="script"><link rel="preload" href="/assets/js/18.9cb7157b.js" as="script"><link rel="prefetch" href="/assets/js/10.331726d5.js"><link rel="prefetch" href="/assets/js/11.b8da12f6.js"><link rel="prefetch" href="/assets/js/12.378c20c3.js"><link rel="prefetch" href="/assets/js/13.9b896285.js"><link rel="prefetch" href="/assets/js/14.94ea083e.js"><link rel="prefetch" href="/assets/js/15.ddb796d5.js"><link rel="prefetch" href="/assets/js/16.be6fa19f.js"><link rel="prefetch" href="/assets/js/17.6aa34787.js"><link rel="prefetch" href="/assets/js/19.9d4ba711.js"><link rel="prefetch" href="/assets/js/20.e370eaa2.js"><link rel="prefetch" href="/assets/js/21.56c87e54.js"><link rel="prefetch" href="/assets/js/22.4c624b2c.js"><link rel="prefetch" href="/assets/js/23.90b4299c.js"><link rel="prefetch" href="/assets/js/24.69ede40f.js"><link rel="prefetch" href="/assets/js/25.a547a671.js"><link rel="prefetch" href="/assets/js/26.2e359fd5.js"><link rel="prefetch" href="/assets/js/27.dfe71320.js"><link rel="prefetch" href="/assets/js/28.259ce105.js"><link rel="prefetch" href="/assets/js/29.0eb49c4d.js"><link rel="prefetch" href="/assets/js/3.b69d01d7.js"><link rel="prefetch" href="/assets/js/30.f0c9c863.js"><link rel="prefetch" href="/assets/js/31.20174c1d.js"><link rel="prefetch" href="/assets/js/32.babe428d.js"><link rel="prefetch" href="/assets/js/33.10ec67d7.js"><link rel="prefetch" href="/assets/js/4.b536f15f.js"><link rel="prefetch" href="/assets/js/5.9fcc5445.js"><link rel="prefetch" href="/assets/js/6.e09b9b27.js"><link rel="prefetch" href="/assets/js/7.4a93e793.js"><link rel="prefetch" href="/assets/js/8.7a8bf80c.js"><link rel="prefetch" href="/assets/js/9.bdbaadcf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6cf9dbb0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/btqf.jpg" alt="btqf-blog" class="logo"> <span class="site-name can-hide">btqf-blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/folder1/HTML必知必会.html" class="nav-link">
  web前端必备
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder3/冒泡排序.html" class="nav-link">
  数据结构算法
</a></li></ul></div></div><div class="nav-item"><a href="/pages/folder1/Event Loop.html" class="nav-link">
  功能演示
</a></div><div class="nav-item"><a href="https://github.com/btqf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/folder1/HTML必知必会.html" class="nav-link">
  web前端必备
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder2/test4.html" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/pages/folder3/冒泡排序.html" class="nav-link">
  数据结构算法
</a></li></ul></div></div><div class="nav-item"><a href="/pages/folder1/Event Loop.html" class="nav-link">
  功能演示
</a></div><div class="nav-item"><a href="https://github.com/btqf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/HTML必知必会.html" class="sidebar-link">HTML必知必会</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/JS类型判断与转换.html" class="sidebar-link">类型判断与转换</a></li><li><a href="/pages/folder1/变量提升.html" class="active sidebar-link">变量提升</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/folder1/变量提升.html#_1-let存在提升" class="sidebar-link">1. let存在提升</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/变量提升.html#_2-var-function的变量提升" class="sidebar-link">2. var/function的变量提升</a></li><li class="sidebar-sub-header"><a href="/pages/folder1/变量提升.html#_3-总结" class="sidebar-link">3. 总结</a></li></ul></li><li><a href="/pages/folder1/this指向.html" class="sidebar-link">this指向</a></li><li><a href="/pages/folder1/闭包.html" class="sidebar-link">闭包</a></li><li><a href="/pages/folder1/new运算符.html" class="sidebar-link">new操作符</a></li><li><a href="/pages/folder1/call &amp; apply &amp; bind.html" class="sidebar-link">call/apply/bind</a></li><li><a href="/pages/folder1/原型.html" class="sidebar-link">原型</a></li><li><a href="/pages/folder1/类.html" class="sidebar-link">Class</a></li><li><a href="/pages/folder1/继承.html" class="sidebar-link">继承</a></li><li><a href="/pages/folder1/模块化.html" class="sidebar-link">模块化</a></li><li><a href="/pages/folder1/异步编程.html" class="sidebar-link">异步编程</a></li><li><a href="/pages/folder1/Event Loop.html" class="sidebar-link">Event Loop</a></li><li><a href="/pages/folder1/节流函数和防抖函数.html" class="sidebar-link">节流防抖</a></li><li><a href="/pages/folder1/柯里化.html" class="sidebar-link">柯里化</a></li><li><a href="/pages/folder1/chrome v8的内存管理与垃圾回收.html" class="sidebar-link">内存管理与垃圾回收</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/Event Loop.html" class="sidebar-link">React Hook</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/folder1/Event Loop.html" class="sidebar-link">Vue生命周期</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>在我们的印象中，当提到<code>JavaScript</code>中的变量提升，我们想到的是“变量和函数的声明在物理层面移动到代码的最前面“。当然这么说不大准确，变量和函数声明在代码里的位置是不会变的，而是在编译阶段被放入内存中。</p> <p>可是如果我问你：<code>let 到底有没有提升？如果有，var / let / function三者的变量提升一致吗？</code>此时你的答案是什么？</p> <p>接下来让我们来探讨这两个问题，如有错误敬请指正。</p> <h2 id="_1-let存在提升"><a href="#_1-let存在提升" class="header-anchor">#</a> 1. let存在提升</h2> <p>对于<code>let</code>是否存在提升这个问题，让我们先来看以下这段代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>a = &quot;global&quot;;

(function() {
    console.log(a); // undefined, 而不是打印出global
    var a;
}());

{
    console.log(a); // Uncaught ReferenceError: Cannot access 'a' before initialization
    let a = 1;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>对于在函数作用域下打印出<code>undefined</code>，我们应该不奇怪。但引起我注意的是在块作用域下，抛出引用错误的原因是在初始化之前找不到<code>a</code>。那有没有可能<code>a</code>在<strong>创建过程被提升</strong>？而在我发现ES文档中存在<code>[var/let hoisting]</code>，这让我有理由猜测<code>let</code>存在提升，只是由于<strong>暂时性死区</strong>的原因，我们不能在<code>let a</code>之前使用 <code>a</code>。</p> <p>为了证明我的猜想，我想先从<code>let</code>声明的创建、初始化和赋值过程入手。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  let a = 0;
  a = 1;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上述的代码块中发生的过程如下：</p> <ol><li>找到所有用<code>let</code>声明的变量，在环境创建变量；</li> <li><strong>执行代码；</strong></li> <li>执行<code>a=0</code>，将<code>a</code>初始化为1；</li> <li>执行<code>a=1</code>，对<code>a</code>进行赋值。</li></ol> <p>由该过程可知，如果我们在<strong>创建完变量后和初始化之前</strong>执行<code>log()</code>方法，控制台将会报错：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let a = 'global'
{
  console.log(a) // Uncaught ReferenceError: Cannot access 'a' before initialization
  let a = 1
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>由此一来我们就可以知道了<code>let</code>在创建的过程被提升，而在初始化过程没有被提升。</p> <h2 id="_2-var-function的变量提升"><a href="#_2-var-function的变量提升" class="header-anchor">#</a> 2. var/function的变量提升</h2> <p>接下来我们来看看<code>function/var</code>的创建、初始化和赋值过程，由此看看能否探究出它们的差别。</p> <h3 id="_2-1-var的变量提升"><a href="#_2-1-var的变量提升" class="header-anchor">#</a> 2.1 var的变量提升</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>function foo() {
  console.log(a);  // undefined
  var a = 0;
  var b = 1;
}
foo();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>当我们执行<code>foo()</code>时，发生以下过程（较为省略）：</p> <ol><li>为<code>foo</code>创建环境；</li> <li>找到<code>foo</code>中所有被<code>var</code>声明的变量，在这个环境中创建变量；</li> <li>将变量初始化为 undefined;</li> <li>执行代码；</li> <li>将<code>a</code>赋值为0，<code>b</code>赋值为1。</li></ol> <p>由此我们可以知道<code>var</code>声明在代码执行前创建变量并初始化，所以当我们在<code>var a = 0</code>之前执行<code>log(a)</code>方法会得到 undefined 的结果。</p> <h3 id="_2-2-function的变量提升"><a href="#_2-2-function的变量提升" class="header-anchor">#</a> 2.2 function的变量提升</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>foo('btqf');

function foo(name) {
  console.log(&quot;my name is&quot; + name)  // my name is btqf
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当我们执行<code>foo</code>函数时，发生以下过程：</p> <ol><li>找到所有<code>function</code>声明的变量，在环境中创建变量；</li> <li>将这些变量初始化并赋值;</li> <li>执行代码。</li></ol> <p>由此可见，<code>function</code>声明在代码执行前就创建、初始化并赋值。</p> <h2 id="_3-总结"><a href="#_3-总结" class="header-anchor">#</a> 3. 总结</h2> <ol><li><code>let</code>的「创建」过程被提升了，但是初始化没有提升。</li> <li><code>var</code>的「创建」和「初始化」都被提升了。</li> <li><code>function</code> 的「创建」「初始化」和「赋值」都被提升了。</li> <li>函数和变量相比，会被优先提升，即函数会被提升到更靠前的位置。</li></ol> <p>值得一提的是<code>const</code>与<code>let</code>基本类似，唯一的区别在于<code>const</code>只有创建和初始化，没有赋值过程。</p> <p>好啦，本文就讲述到这里，谢谢大家的观看！❤❤</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/folder1/JS类型判断与转换.html" class="prev">
        类型判断与转换
      </a></span> <span class="next"><a href="/pages/folder1/this指向.html">
        this指向
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cffeba78.js" defer></script><script src="/assets/js/2.caeefc96.js" defer></script><script src="/assets/js/18.9cb7157b.js" defer></script>
  </body>
</html>
